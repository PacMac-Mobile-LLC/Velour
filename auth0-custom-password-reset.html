<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>Reset Your Password - Velour</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0" />
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
      background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%);
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      overflow: hidden;
    }

    .background-pattern {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1000 1000"><defs><radialGradient id="a" cx="50%" cy="50%"><stop offset="0%" stop-color="%23ff6b6b" stop-opacity="0.1"/><stop offset="100%" stop-color="%23ff6b6b" stop-opacity="0"/></radialGradient></defs><circle cx="200" cy="200" r="300" fill="url(%23a)"/><circle cx="800" cy="800" r="400" fill="url(%23a)"/></svg>');
      opacity: 0.3;
      z-index: -1;
    }

    .reset-container {
      background: rgba(0, 0, 0, 0.8);
      border-radius: 20px;
      padding: 40px;
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.5);
      border: 2px solid #ff69b4;
      text-align: center;
      max-width: 450px;
      width: 90%;
      backdrop-filter: blur(10px);
    }

    .logo {
      font-size: 2.5rem;
      font-weight: 800;
      margin-bottom: 10px;
      background: linear-gradient(135deg, #ff69b4 0%, #7a288a 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .reset-title {
      font-size: 1.8rem;
      font-weight: 600;
      margin-bottom: 10px;
      color: white;
    }

    .reset-subtitle {
      font-size: 1rem;
      color: #ccc;
      margin-bottom: 30px;
      line-height: 1.5;
    }

    .reset-icon {
      width: 80px;
      height: 80px;
      border-radius: 50%;
      background: linear-gradient(135deg, #ff69b4 0%, #7a288a 100%);
      display: flex;
      align-items: center;
      justify-content: center;
      margin: 0 auto 30px;
      font-size: 2rem;
      animation: pulse 2s infinite;
    }

    @keyframes pulse {
      0% { transform: scale(1); }
      50% { transform: scale(1.05); }
      100% { transform: scale(1); }
    }

    .auth0-lock {
      background: transparent !important;
    }

    .auth0-lock-overlay {
      background: rgba(0, 0, 0, 0.8) !important;
      backdrop-filter: blur(10px) !important;
    }

    .auth0-lock-widget {
      background: transparent !important;
      border: none !important;
      box-shadow: none !important;
    }

    .auth0-lock-header {
      display: none !important;
    }

    .auth0-lock-form {
      background: transparent !important;
    }

    .auth0-lock-input-wrap {
      background: rgba(42, 42, 42, 0.8) !important;
      border: 1px solid #444 !important;
      border-radius: 10px !important;
      margin-bottom: 20px !important;
    }

    .auth0-lock-input {
      background: transparent !important;
      color: white !important;
      font-size: 16px !important;
      padding: 15px 20px !important;
    }

    .auth0-lock-input::placeholder {
      color: #888 !important;
    }

    .auth0-lock-input:focus {
      border-color: #ff69b4 !important;
      box-shadow: 0 0 0 2px rgba(255, 105, 180, 0.2) !important;
    }

    .auth0-lock-submit {
      background: linear-gradient(135deg, #ff69b4 0%, #7a288a 100%) !important;
      border: none !important;
      border-radius: 50px !important;
      font-size: 1.1rem !important;
      font-weight: 600 !important;
      padding: 18px 36px !important;
      box-shadow: 0 10px 30px rgba(255, 105, 180, 0.3) !important;
      transition: all 0.3s ease !important;
      width: 100% !important;
    }

    .auth0-lock-submit:hover {
      transform: translateY(-3px) !important;
      box-shadow: 0 15px 40px rgba(255, 105, 180, 0.4) !important;
    }

    .auth0-lock-alternative {
      color: #ccc !important;
      margin-top: 20px !important;
    }

    .auth0-lock-alternative a {
      color: #ff69b4 !important;
      text-decoration: none !important;
    }

    .auth0-lock-alternative a:hover {
      color: #7a288a !important;
    }

    .loading-spinner {
      display: inline-block;
      width: 20px;
      height: 20px;
      border: 3px solid rgba(255, 255, 255, 0.3);
      border-radius: 50%;
      border-top-color: white;
      animation: spin 1s ease-in-out infinite;
      margin-right: 10px;
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    .error-message {
      background: #ff4444;
      color: white;
      padding: 15px;
      border-radius: 10px;
      margin-bottom: 20px;
      font-size: 0.9rem;
    }

    .success-message {
      background: #28a745;
      color: white;
      padding: 15px;
      border-radius: 10px;
      margin-bottom: 20px;
      font-size: 0.9rem;
    }

    .info-message {
      background: rgba(255, 105, 180, 0.1);
      border: 1px solid rgba(255, 105, 180, 0.3);
      color: #ff69b4;
      padding: 15px;
      border-radius: 10px;
      margin-bottom: 20px;
      font-size: 0.9rem;
    }

    .security-note {
      display: flex;
      align-items: center;
      gap: 10px;
      color: #888;
      font-size: 0.8rem;
      margin-top: 20px;
      justify-content: center;
    }

    .security-note::before {
      content: "üîí";
    }

    .back-to-login {
      margin-top: 20px;
    }

    .back-to-login a {
      color: #ff69b4;
      text-decoration: none;
      font-size: 0.9rem;
      display: inline-flex;
      align-items: center;
      gap: 5px;
    }

    .back-to-login a:hover {
      color: #7a288a;
    }

    .back-to-login a::before {
      content: "‚Üê";
    }

    .password-requirements {
      background: rgba(42, 42, 42, 0.6);
      border: 1px solid #444;
      border-radius: 10px;
      padding: 15px;
      margin-bottom: 20px;
      text-align: left;
    }

    .password-requirements h4 {
      color: white;
      margin-bottom: 10px;
      font-size: 0.9rem;
    }

    .password-requirements ul {
      list-style: none;
      padding: 0;
      margin: 0;
    }

    .password-requirements li {
      color: #ccc;
      font-size: 0.8rem;
      margin-bottom: 5px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .password-requirements li::before {
      content: "‚Ä¢";
      color: #ff69b4;
    }

    .password-requirements li.valid::before {
      content: "‚úì";
      color: #28a745;
    }

    .password-requirements li.invalid::before {
      content: "‚úó";
      color: #ff4444;
    }

    .strength-meter {
      height: 4px;
      background: #333;
      border-radius: 2px;
      margin-top: 10px;
      overflow: hidden;
    }

    .strength-meter-fill {
      height: 100%;
      transition: all 0.3s ease;
      border-radius: 2px;
    }

    .strength-meter-fill.weak {
      width: 25%;
      background: #ff4444;
    }

    .strength-meter-fill.fair {
      width: 50%;
      background: #ffa500;
    }

    .strength-meter-fill.good {
      width: 75%;
      background: #ffeb3b;
    }

    .strength-meter-fill.strong {
      width: 100%;
      background: #28a745;
    }

    @media (max-width: 480px) {
      .reset-container {
        padding: 30px 20px;
        margin: 20px;
      }
      
      .logo {
        font-size: 2rem;
      }
      
      .reset-title {
        font-size: 1.5rem;
      }
      
      .password-requirements {
        padding: 12px;
      }
    }
  </style>
</head>
<body>
  <div class="background-pattern"></div>
  
  <div class="reset-container">
    <div class="logo">Velour</div>
    <div class="reset-title">Reset Your Password</div>
    <div class="reset-subtitle">
      Enter your email address and we'll send you a link to reset your password
    </div>
    
    <div class="reset-icon">üîë</div>
    
    <div id="auth0-reset-container"></div>
    
    <div class="security-note">
      We'll send you a secure link to reset your password
    </div>
    
    <div class="back-to-login">
      <a href="#" id="back-to-login-link">Back to login</a>
    </div>
  </div>

  <!--[if IE 8]>
  <script src="//cdnjs.cloudflare.com/ajax/libs/ie8/0.2.5/ie8.js"></script>
  <![endif]-->

  <!--[if lte IE 9]>
  <script src="https://cdn.auth0.com/js/base64.js"></script>
  <script src="https://cdn.auth0.com/js/es5-shim.min.js"></script>
  <![endif]-->

  <script src="https://cdn.auth0.com/js/lock/13.0/lock.min.js"></script>
  <script>
    // Decode utf8 characters properly
    var config = JSON.parse(decodeURIComponent(escape(window.atob('@@config@@'))));
    config.extraParams = config.extraParams || {};
    var connection = config.connection;
    var prompt = config.prompt;
    var languageDictionary;
    var language;

    if (config.dict && config.dict.signin && config.dict.signin.title) {
      languageDictionary = { title: config.dict.signin.title };
    } else if (typeof config.dict === 'string') {
      language = config.dict;
    }
    var loginHint = config.extraParams.login_hint;
    var colors = config.colors || {};

    // Available Lock configuration options: https://auth0.com/docs/libraries/lock/lock-configuration
    var lock = new Auth0Lock(config.clientID, config.auth0Domain, {
      container: 'auth0-reset-container',
      auth: {
        redirectUrl: config.callbackURL,
        responseType: (config.internalOptions || {}).response_type ||
          (config.callbackOnLocationHash ? 'token' : 'code'),
        params: config.internalOptions
      },
      configurationBaseUrl: config.clientConfigurationBaseUrl,
      overrides: {
        __tenant: config.auth0Tenant,
        __token_issuer: config.authorizationServer.issuer
      },
      assetsUrl: config.assetsUrl,
      allowedConnections: connection ? [connection] : null,
      rememberLastLogin: !prompt,
      language: language,
      languageBaseUrl: config.languageBaseUrl,
      languageDictionary: languageDictionary,
      theme: {
        primaryColor: '#ff69b4',
        logo: 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHZpZXdCb3g9IjAgMCA0MCA0MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjQwIiBoZWlnaHQ9IjQwIiByeD0iMjAiIGZpbGw9InVybCgjZ3JhZGllbnQwX2xpbmVhcl8xXzEpIi8+CjxwYXRoIGQ9Ik0yMCAxMEMxNi42ODYzIDEwIDE0IDEyLjY4NjMgMTQgMTZDMTRfMTkuMzEzNyAxNi42ODYzIDIyIDE5LjMxMzcgMjIgMjJDMjIgMjQuNjg2MyAxOS4zMTM3IDI3IDE2IDI3QzEyLjY4NjMgMjcgMTAgMjQuNjg2MyAxMCAyMUwyMCAxMFoiIGZpbGw9IndoaXRlIi8+CjxkZWZzPgo8bGluZWFyR3JhZGllbnQgaWQ9ImdyYWRpZW50MF9saW5lYXJfMV8xIiB4MT0iMCIgeTE9IjAiIHgyPSI0MCIgeTI9IjQwIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+CjxzdG9wIHN0b3AtY29sb3I9IiNGRjY5QjQiLz4KPHN0b3Agb2Zmc2V0PSIxIiBzdG9wLWNvbG9yPSIjN0EyODhBIi8+CjwvbGluZWFyR3JhZGllbnQ+CjwvZGVmcz4KPC9zdmc+'
      },
      prefill: loginHint ? { email: loginHint, username: loginHint } : null,
      closable: false,
      defaultADUsernameFromEmailPrefix: false,
      allowSignUp: false,
      allowForgotPassword: true,
      allowShowPassword: false,
      autoclose: true,
      autofocus: true,
      avatar: null,
      allowLogin: false,
      loginAfterSignUp: false,
      mustAcceptTerms: false,
      flashMessage: {
        type: 'error',
        text: 'Please enter a valid email address'
      }
    });

    // Custom styling for the password reset lock widget
    lock.on('ready', function() {
      // Hide the default header since we have our custom one
      var header = document.querySelector('.auth0-lock-header');
      if (header) {
        header.style.display = 'none';
      }
      
      // Add custom loading state
      var submitButton = document.querySelector('.auth0-lock-submit');
      if (submitButton) {
        submitButton.addEventListener('click', function() {
          if (!this.disabled) {
            this.innerHTML = '<div class="loading-spinner"></div>Sending reset link...';
            this.disabled = true;
          }
        });
      }

      // Style the email input
      var input = document.querySelector('.auth0-lock-input');
      if (input) {
        input.placeholder = 'Enter your email address';
        input.type = 'email';
        
        // Add email validation
        input.addEventListener('blur', function() {
          var email = this.value.trim();
          if (email && !isValidEmail(email)) {
            showError('Please enter a valid email address');
          }
        });
      }

      // Add back to login functionality
      addBackToLoginButton();
    });

    // Handle authentication events
    lock.on('authenticated', function(authResult) {
      console.log('Password reset successful:', authResult);
      showSuccess('Password reset link sent! Check your email.');
    });

    lock.on('authorization_error', function(error) {
      console.error('Password reset error:', error);
      showError('Failed to send reset link. Please try again.');
      resetSubmitButton();
    });

    lock.on('unrecoverable_error', function(error) {
      console.error('Password reset unrecoverable error:', error);
      showError('An unexpected error occurred. Please refresh the page.');
      resetSubmitButton();
    });

    function showError(message) {
      var errorDiv = document.createElement('div');
      errorDiv.className = 'error-message';
      errorDiv.textContent = message;
      
      var container = document.getElementById('auth0-reset-container');
      container.insertBefore(errorDiv, container.firstChild);
      
      // Remove error after 5 seconds
      setTimeout(function() {
        if (errorDiv.parentNode) {
          errorDiv.parentNode.removeChild(errorDiv);
        }
      }, 5000);
    }

    function showSuccess(message) {
      var successDiv = document.createElement('div');
      successDiv.className = 'success-message';
      successDiv.textContent = message;
      
      var container = document.getElementById('auth0-reset-container');
      container.insertBefore(successDiv, container.firstChild);
    }

    function showInfo(message) {
      var infoDiv = document.createElement('div');
      infoDiv.className = 'info-message';
      infoDiv.textContent = message;
      
      var container = document.getElementById('auth0-reset-container');
      container.insertBefore(infoDiv, container.firstChild);
    }

    function resetSubmitButton() {
      var submitButton = document.querySelector('.auth0-lock-submit');
      if (submitButton) {
        submitButton.innerHTML = 'Send Reset Link';
        submitButton.disabled = false;
      }
    }

    function addBackToLoginButton() {
      var backLink = document.getElementById('back-to-login-link');
      backLink.addEventListener('click', function(e) {
        e.preventDefault();
        // Redirect to login page
        window.location.href = '/login';
      });
    }

    function isValidEmail(email) {
      var emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
      return emailRegex.test(email);
    }

    // Apply custom background color if specified
    if(colors.page_background) {
      var css = '.auth0-lock.auth0-lock .auth0-lock-overlay { background: ' +
                  colors.page_background +
                ' }';
      var style = document.createElement('style');
      style.appendChild(document.createTextNode(css));
      document.body.appendChild(style);
    }

    lock.show();
  </script>
</body>
</html>
