{"ast":null,"code":"import _taggedTemplateLiteral from\"/Users/matty/Zoom2/client/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js\";var _templateObject,_templateObject2,_templateObject3,_templateObject4,_templateObject5,_templateObject6,_templateObject7,_templateObject8,_templateObject9,_templateObject0,_templateObject1,_templateObject10,_templateObject11,_templateObject12,_templateObject13,_templateObject14,_templateObject15,_templateObject16,_templateObject17;import React,{useState,useEffect,useRef,useCallback}from'react';import{useParams,useSearchParams,useNavigate}from'react-router-dom';import io from'socket.io-client';import styled from'styled-components';import{Mic,MicOff,Video,VideoOff,Monitor,MessageSquare,Phone,Users,Send}from'lucide-react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Container=styled.div(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  min-height: 100vh;\\n  background: #1a1a1a;\\n  display: flex;\\n  flex-direction: column;\\n\"])));const Header=styled.div(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n  background: #2d2d2d;\\n  padding: 15px 20px;\\n  display: flex;\\n  justify-content: space-between;\\n  align-items: center;\\n  color: white;\\n\"])));const RoomInfo=styled.div(_templateObject3||(_templateObject3=_taggedTemplateLiteral([\"\\n  display: flex;\\n  align-items: center;\\n  gap: 10px;\\n\"])));const RoomId=styled.span(_templateObject4||(_templateObject4=_taggedTemplateLiteral([\"\\n  font-weight: 600;\\n  font-size: 1.1rem;\\n\"])));const MainContent=styled.div(_templateObject5||(_templateObject5=_taggedTemplateLiteral([\"\\n  flex: 1;\\n  display: flex;\\n  position: relative;\\n\"])));const VideoGrid=styled.div(_templateObject6||(_templateObject6=_taggedTemplateLiteral([\"\\n  flex: 1;\\n  display: grid;\\n  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));\\n  gap: 10px;\\n  padding: 20px;\\n  align-content: start;\\n\"])));const VideoContainer=styled.div(_templateObject7||(_templateObject7=_taggedTemplateLiteral([\"\\n  position: relative;\\n  background: #333;\\n  border-radius: 10px;\\n  overflow: hidden;\\n  aspect-ratio: 16/9;\\n  min-height: 200px;\\n\"])));const StyledVideo=styled.video(_templateObject8||(_templateObject8=_taggedTemplateLiteral([\"\\n  width: 100%;\\n  height: 100%;\\n  object-fit: cover;\\n\"])));const VideoLabel=styled.div(_templateObject9||(_templateObject9=_taggedTemplateLiteral([\"\\n  position: absolute;\\n  bottom: 10px;\\n  left: 10px;\\n  background: rgba(0, 0, 0, 0.7);\\n  color: white;\\n  padding: 5px 10px;\\n  border-radius: 5px;\\n  font-size: 0.9rem;\\n\"])));const ChatPanel=styled.div(_templateObject0||(_templateObject0=_taggedTemplateLiteral([\"\\n  width: 350px;\\n  background: #2d2d2d;\\n  display: flex;\\n  flex-direction: column;\\n  border-left: 1px solid #444;\\n\"])));const ChatHeader=styled.div(_templateObject1||(_templateObject1=_taggedTemplateLiteral([\"\\n  padding: 15px 20px;\\n  border-bottom: 1px solid #444;\\n  color: white;\\n  font-weight: 600;\\n\"])));const ChatMessages=styled.div(_templateObject10||(_templateObject10=_taggedTemplateLiteral([\"\\n  flex: 1;\\n  padding: 15px;\\n  overflow-y: auto;\\n  display: flex;\\n  flex-direction: column;\\n  gap: 10px;\\n\"])));const Message=styled.div(_templateObject11||(_templateObject11=_taggedTemplateLiteral([\"\\n  background: \",\";\\n  color: white;\\n  padding: 10px 15px;\\n  border-radius: 10px;\\n  max-width: 80%;\\n  align-self: \",\";\\n  word-wrap: break-word;\\n\"])),props=>props.isOwn?'#667eea':'#444',props=>props.isOwn?'flex-end':'flex-start');const MessageSender=styled.div(_templateObject12||(_templateObject12=_taggedTemplateLiteral([\"\\n  font-size: 0.8rem;\\n  opacity: 0.7;\\n  margin-bottom: 5px;\\n\"])));const ChatInput=styled.div(_templateObject13||(_templateObject13=_taggedTemplateLiteral([\"\\n  padding: 15px;\\n  border-top: 1px solid #444;\\n  display: flex;\\n  gap: 10px;\\n\"])));const MessageInput=styled.input(_templateObject14||(_templateObject14=_taggedTemplateLiteral([\"\\n  flex: 1;\\n  padding: 10px 15px;\\n  border: 1px solid #555;\\n  border-radius: 20px;\\n  background: #333;\\n  color: white;\\n  font-size: 0.9rem;\\n\\n  &:focus {\\n    outline: none;\\n    border-color: #667eea;\\n  }\\n\\n  &::placeholder {\\n    color: #999;\\n  }\\n\"])));const SendButton=styled.button(_templateObject15||(_templateObject15=_taggedTemplateLiteral([\"\\n  background: #667eea;\\n  border: none;\\n  border-radius: 50%;\\n  width: 40px;\\n  height: 40px;\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  color: white;\\n  cursor: pointer;\\n  transition: background 0.3s ease;\\n\\n  &:hover {\\n    background: #5a6fd8;\\n  }\\n\"])));const Controls=styled.div(_templateObject16||(_templateObject16=_taggedTemplateLiteral([\"\\n  background: #2d2d2d;\\n  padding: 20px;\\n  display: flex;\\n  justify-content: center;\\n  gap: 15px;\\n  border-top: 1px solid #444;\\n\"])));const ControlButton=styled.button(_templateObject17||(_templateObject17=_taggedTemplateLiteral([\"\\n  background: \",\";\\n  border: none;\\n  border-radius: 50%;\\n  width: 50px;\\n  height: 50px;\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  color: white;\\n  cursor: pointer;\\n  transition: all 0.3s ease;\\n\\n  &:hover {\\n    background: \",\";\\n  }\\n\\n  &.leave {\\n    background: #dc3545;\\n    \\n    &:hover {\\n      background: #c82333;\\n    }\\n  }\\n\"])),props=>props.active?'#667eea':'#444',props=>props.active?'#5a6fd8':'#555');const VideoRoom=()=>{const{roomId}=useParams();const[searchParams]=useSearchParams();const navigate=useNavigate();const[socket,setSocket]=useState(null);const[localStream,setLocalStream]=useState(null);const[remoteStreams,setRemoteStreams]=useState(new Map());const[isAudioMuted,setIsAudioMuted]=useState(false);const[isVideoMuted,setIsVideoMuted]=useState(false);const[isScreenSharing,setIsScreenSharing]=useState(false);const[showChat,setShowChat]=useState(false);const[messages,setMessages]=useState([]);const[newMessage,setNewMessage]=useState('');const[participants,setParticipants]=useState(1);const localVideoRef=useRef(null);const remoteVideoRefs=useRef(new Map());const peerConnections=useRef(new Map());const userName=searchParams.get('name')||'Anonymous';const[socketId,setSocketId]=useState(null);// Initialize socket connection\nuseEffect(()=>{const socketUrl=process.env.NODE_ENV==='production'?window.location.origin:'http://localhost:5001';const newSocket=io(socketUrl);setSocket(newSocket);// Store socket ID when connected\nnewSocket.on('connect',()=>{setSocketId(newSocket.id);console.log('Socket connected with ID:',newSocket.id);});return()=>{newSocket.close();};},[]);// Initialize local media stream\nuseEffect(()=>{const initLocalStream=async()=>{try{const stream=await navigator.mediaDevices.getUserMedia({video:true,audio:true});setLocalStream(stream);if(localVideoRef.current){localVideoRef.current.srcObject=stream;}}catch(error){console.error('Error accessing media devices:',error);alert('Unable to access camera and microphone. Please check permissions.');}};initLocalStream();},[]);// Socket event handlers\nuseEffect(()=>{if(!socket)return;const handleUserConnected=userId=>{console.log('User connected:',userId);setParticipants(prev=>prev+1);createPeerConnection(userId);// Send offer to the new user\nsetTimeout(()=>{sendOffer(userId);},1000);// Small delay to ensure peer connection is established\n};const handleUserDisconnected=userId=>{console.log('User disconnected:',userId);setParticipants(prev=>prev-1);if(peerConnections.current.has(userId)){peerConnections.current.get(userId).close();peerConnections.current.delete(userId);}setRemoteStreams(prev=>{const newStreams=new Map(prev);newStreams.delete(userId);return newStreams;});};const handleOffer=async data=>{console.log('Received offer from:',data.userId);await handleOfferReceived(data);};const handleAnswer=async data=>{console.log('Received answer from:',data.userId);await handleAnswerReceived(data);};const handleIceCandidate=async data=>{console.log('Received ICE candidate from:',data.userId);await handleIceCandidateReceived(data);};const handleMessage=data=>{setMessages(prev=>[...prev,data]);};const handleExistingUsers=existingUsers=>{console.log('Existing users:',existingUsers);const currentUserId=\"\".concat(userName,\"-\").concat(socketId);existingUsers.forEach(userId=>{if(userId!==currentUserId){// Don't create connection to self\nconsole.log('Creating peer connection to:',userId);createPeerConnection(userId);setTimeout(()=>{sendOffer(userId);},1000);}});};socket.on('user-connected',handleUserConnected);socket.on('user-disconnected',handleUserDisconnected);socket.on('offer',handleOffer);socket.on('answer',handleAnswer);socket.on('ice-candidate',handleIceCandidate);socket.on('receive-message',handleMessage);socket.on('existing-users',handleExistingUsers);return()=>{socket.off('user-connected',handleUserConnected);socket.off('user-disconnected',handleUserDisconnected);socket.off('offer',handleOffer);socket.off('answer',handleAnswer);socket.off('ice-candidate',handleIceCandidate);socket.off('receive-message',handleMessage);socket.off('existing-users',handleExistingUsers);};},[socket]);// Join room when socket is ready\nuseEffect(()=>{if(socket&&roomId&&socketId){const userId=\"\".concat(userName,\"-\").concat(socketId);console.log('Joining room with user ID:',userId);socket.emit('join-room',roomId,userId);}},[socket,roomId,userName,socketId]);// Send offers to existing users when local stream is ready\nuseEffect(()=>{if(localStream&&socket&&roomId&&socketId){// Get existing participants and send offers to them\nsocket.emit('get-existing-users',roomId);}},[localStream,socket,roomId,socketId]);// Create peer connection\nconst createPeerConnection=useCallback(userId=>{console.log('Creating peer connection for user:',userId);const peerConnection=new RTCPeerConnection({iceServers:[{urls:'stun:stun.l.google.com:19302'},{urls:'stun:stun1.l.google.com:19302'}]});// Add local stream tracks\nif(localStream){console.log('Adding local stream tracks to peer connection');localStream.getTracks().forEach(track=>{peerConnection.addTrack(track,localStream);});}// Handle remote stream\npeerConnection.ontrack=event=>{console.log('Received remote stream from:',userId);const[remoteStream]=event.streams;setRemoteStreams(prev=>new Map(prev).set(userId,remoteStream));};// Handle ICE candidates\npeerConnection.onicecandidate=event=>{if(event.candidate){console.log('Sending ICE candidate to:',userId);socket.emit('ice-candidate',{candidate:event.candidate,roomId,userId});}};// Handle connection state changes\npeerConnection.onconnectionstatechange=()=>{console.log('Peer connection state changed:',peerConnection.connectionState);};peerConnections.current.set(userId,peerConnection);},[localStream,socket,roomId]);// Handle offer received\nconst handleOfferReceived=useCallback(async data=>{const{offer,userId}=data;console.log('Handling offer from:',userId);let peerConnection=peerConnections.current.get(userId);if(!peerConnection){console.log('Creating new peer connection for offer from:',userId);createPeerConnection(userId);peerConnection=peerConnections.current.get(userId);}try{await peerConnection.setRemoteDescription(new RTCSessionDescription(offer));const answer=await peerConnection.createAnswer();await peerConnection.setLocalDescription(answer);console.log('Sending answer to:',userId);socket.emit('answer',{answer,roomId,userId});}catch(error){console.error('Error handling offer:',error);}},[createPeerConnection,socket,roomId]);// Handle answer received\nconst handleAnswerReceived=useCallback(async data=>{const{answer,userId}=data;console.log('Handling answer from:',userId);const peerConnection=peerConnections.current.get(userId);if(peerConnection){try{await peerConnection.setRemoteDescription(new RTCSessionDescription(answer));console.log('Answer set successfully for:',userId);}catch(error){console.error('Error handling answer:',error);}}else{console.error('No peer connection found for user:',userId);}},[]);// Handle ICE candidate received\nconst handleIceCandidateReceived=useCallback(async data=>{const{candidate,userId}=data;const peerConnection=peerConnections.current.get(userId);if(peerConnection){try{await peerConnection.addIceCandidate(new RTCIceCandidate(candidate));}catch(error){console.error('Error handling ICE candidate:',error);}}},[]);// Send offer to new user\nconst sendOffer=useCallback(async userId=>{const peerConnection=peerConnections.current.get(userId);if(!peerConnection){console.error('No peer connection found when trying to send offer to:',userId);return;}try{console.log('Creating and sending offer to:',userId);const offer=await peerConnection.createOffer();await peerConnection.setLocalDescription(offer);socket.emit('offer',{offer,roomId,userId});console.log('Offer sent to:',userId);}catch(error){console.error('Error sending offer:',error);}},[socket,roomId]);// Toggle audio\nconst toggleAudio=()=>{if(localStream){const audioTrack=localStream.getAudioTracks()[0];if(audioTrack){audioTrack.enabled=!audioTrack.enabled;setIsAudioMuted(!audioTrack.enabled);}}};// Toggle video\nconst toggleVideo=()=>{if(localStream){const videoTrack=localStream.getVideoTracks()[0];if(videoTrack){videoTrack.enabled=!videoTrack.enabled;setIsVideoMuted(!videoTrack.enabled);}}};// Toggle screen sharing\nconst toggleScreenShare=async()=>{try{if(!isScreenSharing){const screenStream=await navigator.mediaDevices.getDisplayMedia({video:true,audio:true});// Replace video track in all peer connections\nconst videoTrack=screenStream.getVideoTracks()[0];peerConnections.current.forEach(peerConnection=>{const sender=peerConnection.getSenders().find(s=>s.track&&s.track.kind==='video');if(sender){sender.replaceTrack(videoTrack);}});// Update local video\nif(localVideoRef.current){localVideoRef.current.srcObject=screenStream;}setIsScreenSharing(true);// Handle screen share end\nvideoTrack.onended=()=>{toggleScreenShare();};}else{// Stop screen sharing and restore camera\nif(localStream){const videoTrack=localStream.getVideoTracks()[0];peerConnections.current.forEach(peerConnection=>{const sender=peerConnection.getSenders().find(s=>s.track&&s.track.kind==='video');if(sender){sender.replaceTrack(videoTrack);}});if(localVideoRef.current){localVideoRef.current.srcObject=localStream;}}setIsScreenSharing(false);}}catch(error){console.error('Error toggling screen share:',error);}};// Send message\nconst sendMessage=()=>{if(newMessage.trim()&&socket){const message={text:newMessage.trim(),sender:userName,timestamp:new Date().toISOString()};socket.emit('send-message',{message,roomId});setNewMessage('');}};// Leave room\nconst leaveRoom=()=>{if(socket){socket.emit('leave-room',roomId,userName);}// Close all peer connections\npeerConnections.current.forEach(peerConnection=>{peerConnection.close();});// Stop local stream\nif(localStream){localStream.getTracks().forEach(track=>track.stop());}navigate('/');};// Handle key press for message input\nconst handleKeyPress=e=>{if(e.key==='Enter'){sendMessage();}};return/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsx(Header,{children:/*#__PURE__*/_jsxs(RoomInfo,{children:[/*#__PURE__*/_jsx(Users,{size:20}),/*#__PURE__*/_jsxs(RoomId,{children:[\"Room: \",roomId]}),/*#__PURE__*/_jsxs(\"span\",{children:[\"(\",participants,\" participants)\"]})]})}),/*#__PURE__*/_jsxs(MainContent,{children:[/*#__PURE__*/_jsxs(VideoGrid,{children:[/*#__PURE__*/_jsxs(VideoContainer,{children:[/*#__PURE__*/_jsx(StyledVideo,{ref:localVideoRef,autoPlay:true,muted:true,playsInline:true}),/*#__PURE__*/_jsxs(VideoLabel,{children:[userName,\" (You)\"]})]}),Array.from(remoteStreams.entries()).map(_ref=>{let[userId,stream]=_ref;return/*#__PURE__*/_jsxs(VideoContainer,{children:[/*#__PURE__*/_jsx(StyledVideo,{ref:ref=>{if(ref){ref.srcObject=stream;remoteVideoRefs.current.set(userId,ref);}},autoPlay:true,playsInline:true}),/*#__PURE__*/_jsx(VideoLabel,{children:userId})]},userId);})]}),showChat&&/*#__PURE__*/_jsxs(ChatPanel,{children:[/*#__PURE__*/_jsx(ChatHeader,{children:\"Chat\"}),/*#__PURE__*/_jsx(ChatMessages,{children:messages.map((message,index)=>/*#__PURE__*/_jsxs(Message,{isOwn:message.sender===userName,children:[/*#__PURE__*/_jsx(MessageSender,{children:message.sender}),message.text]},index))}),/*#__PURE__*/_jsxs(ChatInput,{children:[/*#__PURE__*/_jsx(MessageInput,{type:\"text\",placeholder:\"Type a message...\",value:newMessage,onChange:e=>setNewMessage(e.target.value),onKeyPress:handleKeyPress}),/*#__PURE__*/_jsx(SendButton,{onClick:sendMessage,children:/*#__PURE__*/_jsx(Send,{size:16})})]})]})]}),/*#__PURE__*/_jsxs(Controls,{children:[/*#__PURE__*/_jsx(ControlButton,{onClick:toggleAudio,active:!isAudioMuted,title:isAudioMuted?'Unmute':'Mute',children:isAudioMuted?/*#__PURE__*/_jsx(MicOff,{size:20}):/*#__PURE__*/_jsx(Mic,{size:20})}),/*#__PURE__*/_jsx(ControlButton,{onClick:toggleVideo,active:!isVideoMuted,title:isVideoMuted?'Turn on camera':'Turn off camera',children:isVideoMuted?/*#__PURE__*/_jsx(VideoOff,{size:20}):/*#__PURE__*/_jsx(Video,{size:20})}),/*#__PURE__*/_jsx(ControlButton,{onClick:toggleScreenShare,active:isScreenSharing,title:isScreenSharing?'Stop sharing':'Share screen',children:/*#__PURE__*/_jsx(Monitor,{size:20})}),/*#__PURE__*/_jsx(ControlButton,{onClick:()=>setShowChat(!showChat),active:showChat,title:\"Toggle chat\",children:/*#__PURE__*/_jsx(MessageSquare,{size:20})}),/*#__PURE__*/_jsx(ControlButton,{onClick:leaveRoom,className:\"leave\",title:\"Leave room\",children:/*#__PURE__*/_jsx(Phone,{size:20})})]})]});};export default VideoRoom;","map":{"version":3,"names":["React","useState","useEffect","useRef","useCallback","useParams","useSearchParams","useNavigate","io","styled","Mic","MicOff","Video","VideoOff","Monitor","MessageSquare","Phone","Users","Send","jsx","_jsx","jsxs","_jsxs","Container","div","_templateObject","_taggedTemplateLiteral","Header","_templateObject2","RoomInfo","_templateObject3","RoomId","span","_templateObject4","MainContent","_templateObject5","VideoGrid","_templateObject6","VideoContainer","_templateObject7","StyledVideo","video","_templateObject8","VideoLabel","_templateObject9","ChatPanel","_templateObject0","ChatHeader","_templateObject1","ChatMessages","_templateObject10","Message","_templateObject11","props","isOwn","MessageSender","_templateObject12","ChatInput","_templateObject13","MessageInput","input","_templateObject14","SendButton","button","_templateObject15","Controls","_templateObject16","ControlButton","_templateObject17","active","VideoRoom","roomId","searchParams","navigate","socket","setSocket","localStream","setLocalStream","remoteStreams","setRemoteStreams","Map","isAudioMuted","setIsAudioMuted","isVideoMuted","setIsVideoMuted","isScreenSharing","setIsScreenSharing","showChat","setShowChat","messages","setMessages","newMessage","setNewMessage","participants","setParticipants","localVideoRef","remoteVideoRefs","peerConnections","userName","get","socketId","setSocketId","socketUrl","process","env","NODE_ENV","window","location","origin","newSocket","on","id","console","log","close","initLocalStream","stream","navigator","mediaDevices","getUserMedia","audio","current","srcObject","error","alert","handleUserConnected","userId","prev","createPeerConnection","setTimeout","sendOffer","handleUserDisconnected","has","delete","newStreams","handleOffer","data","handleOfferReceived","handleAnswer","handleAnswerReceived","handleIceCandidate","handleIceCandidateReceived","handleMessage","handleExistingUsers","existingUsers","currentUserId","concat","forEach","off","emit","peerConnection","RTCPeerConnection","iceServers","urls","getTracks","track","addTrack","ontrack","event","remoteStream","streams","set","onicecandidate","candidate","onconnectionstatechange","connectionState","offer","setRemoteDescription","RTCSessionDescription","answer","createAnswer","setLocalDescription","addIceCandidate","RTCIceCandidate","createOffer","toggleAudio","audioTrack","getAudioTracks","enabled","toggleVideo","videoTrack","getVideoTracks","toggleScreenShare","screenStream","getDisplayMedia","sender","getSenders","find","s","kind","replaceTrack","onended","sendMessage","trim","message","text","timestamp","Date","toISOString","leaveRoom","stop","handleKeyPress","e","key","children","size","ref","autoPlay","muted","playsInline","Array","from","entries","map","_ref","index","type","placeholder","value","onChange","target","onKeyPress","onClick","title","className"],"sources":["/Users/matty/Zoom2/client/src/components/VideoRoom.js"],"sourcesContent":["import React, { useState, useEffect, useRef, useCallback } from 'react';\nimport { useParams, useSearchParams, useNavigate } from 'react-router-dom';\nimport io from 'socket.io-client';\nimport styled from 'styled-components';\nimport { \n  Mic, \n  MicOff, \n  Video, \n  VideoOff, \n  Monitor, \n  MessageSquare, \n  Phone, \n  Users,\n  Send\n} from 'lucide-react';\n\nconst Container = styled.div`\n  min-height: 100vh;\n  background: #1a1a1a;\n  display: flex;\n  flex-direction: column;\n`;\n\nconst Header = styled.div`\n  background: #2d2d2d;\n  padding: 15px 20px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  color: white;\n`;\n\nconst RoomInfo = styled.div`\n  display: flex;\n  align-items: center;\n  gap: 10px;\n`;\n\nconst RoomId = styled.span`\n  font-weight: 600;\n  font-size: 1.1rem;\n`;\n\nconst MainContent = styled.div`\n  flex: 1;\n  display: flex;\n  position: relative;\n`;\n\nconst VideoGrid = styled.div`\n  flex: 1;\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));\n  gap: 10px;\n  padding: 20px;\n  align-content: start;\n`;\n\nconst VideoContainer = styled.div`\n  position: relative;\n  background: #333;\n  border-radius: 10px;\n  overflow: hidden;\n  aspect-ratio: 16/9;\n  min-height: 200px;\n`;\n\nconst StyledVideo = styled.video`\n  width: 100%;\n  height: 100%;\n  object-fit: cover;\n`;\n\nconst VideoLabel = styled.div`\n  position: absolute;\n  bottom: 10px;\n  left: 10px;\n  background: rgba(0, 0, 0, 0.7);\n  color: white;\n  padding: 5px 10px;\n  border-radius: 5px;\n  font-size: 0.9rem;\n`;\n\nconst ChatPanel = styled.div`\n  width: 350px;\n  background: #2d2d2d;\n  display: flex;\n  flex-direction: column;\n  border-left: 1px solid #444;\n`;\n\nconst ChatHeader = styled.div`\n  padding: 15px 20px;\n  border-bottom: 1px solid #444;\n  color: white;\n  font-weight: 600;\n`;\n\nconst ChatMessages = styled.div`\n  flex: 1;\n  padding: 15px;\n  overflow-y: auto;\n  display: flex;\n  flex-direction: column;\n  gap: 10px;\n`;\n\nconst Message = styled.div`\n  background: ${props => props.isOwn ? '#667eea' : '#444'};\n  color: white;\n  padding: 10px 15px;\n  border-radius: 10px;\n  max-width: 80%;\n  align-self: ${props => props.isOwn ? 'flex-end' : 'flex-start'};\n  word-wrap: break-word;\n`;\n\nconst MessageSender = styled.div`\n  font-size: 0.8rem;\n  opacity: 0.7;\n  margin-bottom: 5px;\n`;\n\nconst ChatInput = styled.div`\n  padding: 15px;\n  border-top: 1px solid #444;\n  display: flex;\n  gap: 10px;\n`;\n\nconst MessageInput = styled.input`\n  flex: 1;\n  padding: 10px 15px;\n  border: 1px solid #555;\n  border-radius: 20px;\n  background: #333;\n  color: white;\n  font-size: 0.9rem;\n\n  &:focus {\n    outline: none;\n    border-color: #667eea;\n  }\n\n  &::placeholder {\n    color: #999;\n  }\n`;\n\nconst SendButton = styled.button`\n  background: #667eea;\n  border: none;\n  border-radius: 50%;\n  width: 40px;\n  height: 40px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: white;\n  cursor: pointer;\n  transition: background 0.3s ease;\n\n  &:hover {\n    background: #5a6fd8;\n  }\n`;\n\nconst Controls = styled.div`\n  background: #2d2d2d;\n  padding: 20px;\n  display: flex;\n  justify-content: center;\n  gap: 15px;\n  border-top: 1px solid #444;\n`;\n\nconst ControlButton = styled.button`\n  background: ${props => props.active ? '#667eea' : '#444'};\n  border: none;\n  border-radius: 50%;\n  width: 50px;\n  height: 50px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: white;\n  cursor: pointer;\n  transition: all 0.3s ease;\n\n  &:hover {\n    background: ${props => props.active ? '#5a6fd8' : '#555'};\n  }\n\n  &.leave {\n    background: #dc3545;\n    \n    &:hover {\n      background: #c82333;\n    }\n  }\n`;\n\nconst VideoRoom = () => {\n  const { roomId } = useParams();\n  const [searchParams] = useSearchParams();\n  const navigate = useNavigate();\n  \n  const [socket, setSocket] = useState(null);\n  const [localStream, setLocalStream] = useState(null);\n  const [remoteStreams, setRemoteStreams] = useState(new Map());\n  const [isAudioMuted, setIsAudioMuted] = useState(false);\n  const [isVideoMuted, setIsVideoMuted] = useState(false);\n  const [isScreenSharing, setIsScreenSharing] = useState(false);\n  const [showChat, setShowChat] = useState(false);\n  const [messages, setMessages] = useState([]);\n  const [newMessage, setNewMessage] = useState('');\n  const [participants, setParticipants] = useState(1);\n\n  const localVideoRef = useRef(null);\n  const remoteVideoRefs = useRef(new Map());\n  const peerConnections = useRef(new Map());\n  const userName = searchParams.get('name') || 'Anonymous';\n  const [socketId, setSocketId] = useState(null);\n\n  // Initialize socket connection\n  useEffect(() => {\n    const socketUrl = process.env.NODE_ENV === 'production' \n      ? window.location.origin \n      : 'http://localhost:5001';\n    const newSocket = io(socketUrl);\n    setSocket(newSocket);\n    \n    // Store socket ID when connected\n    newSocket.on('connect', () => {\n      setSocketId(newSocket.id);\n      console.log('Socket connected with ID:', newSocket.id);\n    });\n\n    return () => {\n      newSocket.close();\n    };\n  }, []);\n\n  // Initialize local media stream\n  useEffect(() => {\n    const initLocalStream = async () => {\n      try {\n        const stream = await navigator.mediaDevices.getUserMedia({\n          video: true,\n          audio: true\n        });\n        setLocalStream(stream);\n        if (localVideoRef.current) {\n          localVideoRef.current.srcObject = stream;\n        }\n      } catch (error) {\n        console.error('Error accessing media devices:', error);\n        alert('Unable to access camera and microphone. Please check permissions.');\n      }\n    };\n\n    initLocalStream();\n  }, []);\n\n  // Socket event handlers\n  useEffect(() => {\n    if (!socket) return;\n\n    const handleUserConnected = (userId) => {\n      console.log('User connected:', userId);\n      setParticipants(prev => prev + 1);\n      createPeerConnection(userId);\n      // Send offer to the new user\n      setTimeout(() => {\n        sendOffer(userId);\n      }, 1000); // Small delay to ensure peer connection is established\n    };\n\n    const handleUserDisconnected = (userId) => {\n      console.log('User disconnected:', userId);\n      setParticipants(prev => prev - 1);\n      if (peerConnections.current.has(userId)) {\n        peerConnections.current.get(userId).close();\n        peerConnections.current.delete(userId);\n      }\n      setRemoteStreams(prev => {\n        const newStreams = new Map(prev);\n        newStreams.delete(userId);\n        return newStreams;\n      });\n    };\n\n    const handleOffer = async (data) => {\n      console.log('Received offer from:', data.userId);\n      await handleOfferReceived(data);\n    };\n\n    const handleAnswer = async (data) => {\n      console.log('Received answer from:', data.userId);\n      await handleAnswerReceived(data);\n    };\n\n    const handleIceCandidate = async (data) => {\n      console.log('Received ICE candidate from:', data.userId);\n      await handleIceCandidateReceived(data);\n    };\n\n    const handleMessage = (data) => {\n      setMessages(prev => [...prev, data]);\n    };\n\n    const handleExistingUsers = (existingUsers) => {\n      console.log('Existing users:', existingUsers);\n      const currentUserId = `${userName}-${socketId}`;\n      existingUsers.forEach(userId => {\n        if (userId !== currentUserId) { // Don't create connection to self\n          console.log('Creating peer connection to:', userId);\n          createPeerConnection(userId);\n          setTimeout(() => {\n            sendOffer(userId);\n          }, 1000);\n        }\n      });\n    };\n\n    socket.on('user-connected', handleUserConnected);\n    socket.on('user-disconnected', handleUserDisconnected);\n    socket.on('offer', handleOffer);\n    socket.on('answer', handleAnswer);\n    socket.on('ice-candidate', handleIceCandidate);\n    socket.on('receive-message', handleMessage);\n    socket.on('existing-users', handleExistingUsers);\n\n    return () => {\n      socket.off('user-connected', handleUserConnected);\n      socket.off('user-disconnected', handleUserDisconnected);\n      socket.off('offer', handleOffer);\n      socket.off('answer', handleAnswer);\n      socket.off('ice-candidate', handleIceCandidate);\n      socket.off('receive-message', handleMessage);\n      socket.off('existing-users', handleExistingUsers);\n    };\n  }, [socket]);\n\n  // Join room when socket is ready\n  useEffect(() => {\n    if (socket && roomId && socketId) {\n      const userId = `${userName}-${socketId}`;\n      console.log('Joining room with user ID:', userId);\n      socket.emit('join-room', roomId, userId);\n    }\n  }, [socket, roomId, userName, socketId]);\n\n  // Send offers to existing users when local stream is ready\n  useEffect(() => {\n    if (localStream && socket && roomId && socketId) {\n      // Get existing participants and send offers to them\n      socket.emit('get-existing-users', roomId);\n    }\n  }, [localStream, socket, roomId, socketId]);\n\n  // Create peer connection\n  const createPeerConnection = useCallback((userId) => {\n    console.log('Creating peer connection for user:', userId);\n    const peerConnection = new RTCPeerConnection({\n      iceServers: [\n        { urls: 'stun:stun.l.google.com:19302' },\n        { urls: 'stun:stun1.l.google.com:19302' }\n      ]\n    });\n\n    // Add local stream tracks\n    if (localStream) {\n      console.log('Adding local stream tracks to peer connection');\n      localStream.getTracks().forEach(track => {\n        peerConnection.addTrack(track, localStream);\n      });\n    }\n\n    // Handle remote stream\n    peerConnection.ontrack = (event) => {\n      console.log('Received remote stream from:', userId);\n      const [remoteStream] = event.streams;\n      setRemoteStreams(prev => new Map(prev).set(userId, remoteStream));\n    };\n\n    // Handle ICE candidates\n    peerConnection.onicecandidate = (event) => {\n      if (event.candidate) {\n        console.log('Sending ICE candidate to:', userId);\n        socket.emit('ice-candidate', {\n          candidate: event.candidate,\n          roomId,\n          userId\n        });\n      }\n    };\n\n    // Handle connection state changes\n    peerConnection.onconnectionstatechange = () => {\n      console.log('Peer connection state changed:', peerConnection.connectionState);\n    };\n\n    peerConnections.current.set(userId, peerConnection);\n  }, [localStream, socket, roomId]);\n\n  // Handle offer received\n  const handleOfferReceived = useCallback(async (data) => {\n    const { offer, userId } = data;\n    console.log('Handling offer from:', userId);\n    let peerConnection = peerConnections.current.get(userId);\n    \n    if (!peerConnection) {\n      console.log('Creating new peer connection for offer from:', userId);\n      createPeerConnection(userId);\n      peerConnection = peerConnections.current.get(userId);\n    }\n\n    try {\n      await peerConnection.setRemoteDescription(new RTCSessionDescription(offer));\n      const answer = await peerConnection.createAnswer();\n      await peerConnection.setLocalDescription(answer);\n      \n      console.log('Sending answer to:', userId);\n      socket.emit('answer', {\n        answer,\n        roomId,\n        userId\n      });\n    } catch (error) {\n      console.error('Error handling offer:', error);\n    }\n  }, [createPeerConnection, socket, roomId]);\n\n  // Handle answer received\n  const handleAnswerReceived = useCallback(async (data) => {\n    const { answer, userId } = data;\n    console.log('Handling answer from:', userId);\n    const peerConnection = peerConnections.current.get(userId);\n    \n    if (peerConnection) {\n      try {\n        await peerConnection.setRemoteDescription(new RTCSessionDescription(answer));\n        console.log('Answer set successfully for:', userId);\n      } catch (error) {\n        console.error('Error handling answer:', error);\n      }\n    } else {\n      console.error('No peer connection found for user:', userId);\n    }\n  }, []);\n\n  // Handle ICE candidate received\n  const handleIceCandidateReceived = useCallback(async (data) => {\n    const { candidate, userId } = data;\n    const peerConnection = peerConnections.current.get(userId);\n    \n    if (peerConnection) {\n      try {\n        await peerConnection.addIceCandidate(new RTCIceCandidate(candidate));\n      } catch (error) {\n        console.error('Error handling ICE candidate:', error);\n      }\n    }\n  }, []);\n\n  // Send offer to new user\n  const sendOffer = useCallback(async (userId) => {\n    const peerConnection = peerConnections.current.get(userId);\n    if (!peerConnection) {\n      console.error('No peer connection found when trying to send offer to:', userId);\n      return;\n    }\n\n    try {\n      console.log('Creating and sending offer to:', userId);\n      const offer = await peerConnection.createOffer();\n      await peerConnection.setLocalDescription(offer);\n      \n      socket.emit('offer', {\n        offer,\n        roomId,\n        userId\n      });\n      console.log('Offer sent to:', userId);\n    } catch (error) {\n      console.error('Error sending offer:', error);\n    }\n  }, [socket, roomId]);\n\n  // Toggle audio\n  const toggleAudio = () => {\n    if (localStream) {\n      const audioTrack = localStream.getAudioTracks()[0];\n      if (audioTrack) {\n        audioTrack.enabled = !audioTrack.enabled;\n        setIsAudioMuted(!audioTrack.enabled);\n      }\n    }\n  };\n\n  // Toggle video\n  const toggleVideo = () => {\n    if (localStream) {\n      const videoTrack = localStream.getVideoTracks()[0];\n      if (videoTrack) {\n        videoTrack.enabled = !videoTrack.enabled;\n        setIsVideoMuted(!videoTrack.enabled);\n      }\n    }\n  };\n\n  // Toggle screen sharing\n  const toggleScreenShare = async () => {\n    try {\n      if (!isScreenSharing) {\n        const screenStream = await navigator.mediaDevices.getDisplayMedia({\n          video: true,\n          audio: true\n        });\n        \n        // Replace video track in all peer connections\n        const videoTrack = screenStream.getVideoTracks()[0];\n        peerConnections.current.forEach(peerConnection => {\n          const sender = peerConnection.getSenders().find(s => \n            s.track && s.track.kind === 'video'\n          );\n          if (sender) {\n            sender.replaceTrack(videoTrack);\n          }\n        });\n\n        // Update local video\n        if (localVideoRef.current) {\n          localVideoRef.current.srcObject = screenStream;\n        }\n\n        setIsScreenSharing(true);\n\n        // Handle screen share end\n        videoTrack.onended = () => {\n          toggleScreenShare();\n        };\n      } else {\n        // Stop screen sharing and restore camera\n        if (localStream) {\n          const videoTrack = localStream.getVideoTracks()[0];\n          peerConnections.current.forEach(peerConnection => {\n            const sender = peerConnection.getSenders().find(s => \n              s.track && s.track.kind === 'video'\n            );\n            if (sender) {\n              sender.replaceTrack(videoTrack);\n            }\n          });\n\n          if (localVideoRef.current) {\n            localVideoRef.current.srcObject = localStream;\n          }\n        }\n        setIsScreenSharing(false);\n      }\n    } catch (error) {\n      console.error('Error toggling screen share:', error);\n    }\n  };\n\n  // Send message\n  const sendMessage = () => {\n    if (newMessage.trim() && socket) {\n      const message = {\n        text: newMessage.trim(),\n        sender: userName,\n        timestamp: new Date().toISOString()\n      };\n      \n      socket.emit('send-message', { message, roomId });\n      setNewMessage('');\n    }\n  };\n\n  // Leave room\n  const leaveRoom = () => {\n    if (socket) {\n      socket.emit('leave-room', roomId, userName);\n    }\n    \n    // Close all peer connections\n    peerConnections.current.forEach(peerConnection => {\n      peerConnection.close();\n    });\n    \n    // Stop local stream\n    if (localStream) {\n      localStream.getTracks().forEach(track => track.stop());\n    }\n    \n    navigate('/');\n  };\n\n  // Handle key press for message input\n  const handleKeyPress = (e) => {\n    if (e.key === 'Enter') {\n      sendMessage();\n    }\n  };\n\n  return (\n    <Container>\n      <Header>\n        <RoomInfo>\n          <Users size={20} />\n          <RoomId>Room: {roomId}</RoomId>\n          <span>({participants} participants)</span>\n        </RoomInfo>\n      </Header>\n\n      <MainContent>\n        <VideoGrid>\n          {/* Local video */}\n          <VideoContainer>\n            <StyledVideo\n              ref={localVideoRef}\n              autoPlay\n              muted\n              playsInline\n            />\n            <VideoLabel>{userName} (You)</VideoLabel>\n          </VideoContainer>\n\n          {/* Remote videos */}\n          {Array.from(remoteStreams.entries()).map(([userId, stream]) => (\n            <VideoContainer key={userId}>\n              <StyledVideo\n                ref={ref => {\n                  if (ref) {\n                    ref.srcObject = stream;\n                    remoteVideoRefs.current.set(userId, ref);\n                  }\n                }}\n                autoPlay\n                playsInline\n              />\n              <VideoLabel>{userId}</VideoLabel>\n            </VideoContainer>\n          ))}\n        </VideoGrid>\n\n        {showChat && (\n          <ChatPanel>\n            <ChatHeader>Chat</ChatHeader>\n            <ChatMessages>\n              {messages.map((message, index) => (\n                <Message key={index} isOwn={message.sender === userName}>\n                  <MessageSender>{message.sender}</MessageSender>\n                  {message.text}\n                </Message>\n              ))}\n            </ChatMessages>\n            <ChatInput>\n              <MessageInput\n                type=\"text\"\n                placeholder=\"Type a message...\"\n                value={newMessage}\n                onChange={(e) => setNewMessage(e.target.value)}\n                onKeyPress={handleKeyPress}\n              />\n              <SendButton onClick={sendMessage}>\n                <Send size={16} />\n              </SendButton>\n            </ChatInput>\n          </ChatPanel>\n        )}\n      </MainContent>\n\n      <Controls>\n        <ControlButton\n          onClick={toggleAudio}\n          active={!isAudioMuted}\n          title={isAudioMuted ? 'Unmute' : 'Mute'}\n        >\n          {isAudioMuted ? <MicOff size={20} /> : <Mic size={20} />}\n        </ControlButton>\n\n        <ControlButton\n          onClick={toggleVideo}\n          active={!isVideoMuted}\n          title={isVideoMuted ? 'Turn on camera' : 'Turn off camera'}\n        >\n          {isVideoMuted ? <VideoOff size={20} /> : <Video size={20} />}\n        </ControlButton>\n\n        <ControlButton\n          onClick={toggleScreenShare}\n          active={isScreenSharing}\n          title={isScreenSharing ? 'Stop sharing' : 'Share screen'}\n        >\n          <Monitor size={20} />\n        </ControlButton>\n\n        <ControlButton\n          onClick={() => setShowChat(!showChat)}\n          active={showChat}\n          title=\"Toggle chat\"\n        >\n          <MessageSquare size={20} />\n        </ControlButton>\n\n        <ControlButton\n          onClick={leaveRoom}\n          className=\"leave\"\n          title=\"Leave room\"\n        >\n          <Phone size={20} />\n        </ControlButton>\n      </Controls>\n    </Container>\n  );\n};\n\nexport default VideoRoom;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}