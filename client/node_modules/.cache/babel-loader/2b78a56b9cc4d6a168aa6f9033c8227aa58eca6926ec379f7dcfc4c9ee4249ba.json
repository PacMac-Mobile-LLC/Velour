{"ast":null,"code":"import _taggedTemplateLiteral from\"/Users/matty/VideoChat/VideoChat/client/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js\";var _templateObject,_templateObject2,_templateObject3,_templateObject4,_templateObject5,_templateObject6,_templateObject7;import React,{useState,useEffect}from'react';import styled from'styled-components';import{Bell,X,Check}from'lucide-react';import{requestNotificationPermission,showNotification}from'../utils/pwa';import toast from'react-hot-toast';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const NotificationBanner=styled.div(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  position: fixed;\\n  top: 20px;\\n  right: 20px;\\n  background: linear-gradient(135deg, #ff69b4 0%, #7a288a 100%);\\n  color: white;\\n  padding: 16px 20px;\\n  border-radius: 12px;\\n  box-shadow: 0 10px 30px rgba(255, 105, 180, 0.3);\\n  z-index: 1000;\\n  max-width: 320px;\\n  animation: slideIn 0.3s ease-out;\\n\\n  @keyframes slideIn {\\n    from {\\n      transform: translateX(100%);\\n      opacity: 0;\\n    }\\n    to {\\n      transform: translateX(0);\\n      opacity: 1;\\n    }\\n  }\\n\\n  @media (max-width: 768px) {\\n    top: 10px;\\n    right: 10px;\\n    left: 10px;\\n    max-width: none;\\n  }\\n\"])));const BannerHeader=styled.div(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n  display: flex;\\n  align-items: center;\\n  justify-content: space-between;\\n  margin-bottom: 12px;\\n\"])));const BannerTitle=styled.h3(_templateObject3||(_templateObject3=_taggedTemplateLiteral([\"\\n  margin: 0;\\n  font-size: 1.1rem;\\n  font-weight: 600;\\n  display: flex;\\n  align-items: center;\\n  gap: 8px;\\n\"])));const CloseButton=styled.button(_templateObject4||(_templateObject4=_taggedTemplateLiteral([\"\\n  background: none;\\n  border: none;\\n  color: white;\\n  cursor: pointer;\\n  padding: 4px;\\n  border-radius: 4px;\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n\\n  &:hover {\\n    background: rgba(255, 255, 255, 0.1);\\n  }\\n\"])));const BannerText=styled.p(_templateObject5||(_templateObject5=_taggedTemplateLiteral([\"\\n  margin: 0 0 16px 0;\\n  font-size: 0.9rem;\\n  line-height: 1.4;\\n  opacity: 0.9;\\n\"])));const ButtonGroup=styled.div(_templateObject6||(_templateObject6=_taggedTemplateLiteral([\"\\n  display: flex;\\n  gap: 8px;\\n\"])));const BannerButton=styled.button(_templateObject7||(_templateObject7=_taggedTemplateLiteral([\"\\n  flex: 1;\\n  padding: 8px 16px;\\n  border: none;\\n  border-radius: 8px;\\n  font-size: 0.9rem;\\n  font-weight: 500;\\n  cursor: pointer;\\n  transition: all 0.2s ease;\\n\\n  &.primary {\\n    background: white;\\n    color: #ff69b4;\\n\\n    &:hover {\\n      background: rgba(255, 255, 255, 0.9);\\n    }\\n  }\\n\\n  &.secondary {\\n    background: rgba(255, 255, 255, 0.1);\\n    color: white;\\n    border: 1px solid rgba(255, 255, 255, 0.2);\\n\\n    &:hover {\\n      background: rgba(255, 255, 255, 0.2);\\n    }\\n  }\\n\"])));const NotificationPrompt=()=>{const[showBanner,setShowBanner]=useState(false);const[isRequesting,setIsRequesting]=useState(false);useEffect(()=>{// Check if notifications are supported and permission is not granted\nif('Notification'in window&&Notification.permission==='default'){// Show banner after a short delay\nconst timer=setTimeout(()=>{setShowBanner(true);},3000);return()=>clearTimeout(timer);}},[]);const handleEnableNotifications=async()=>{setIsRequesting(true);try{const granted=await requestNotificationPermission();if(granted){toast.success('Notifications enabled! You\\'ll receive updates about new content.');setShowBanner(false);// Show a test notification\nsetTimeout(()=>{showNotification('Welcome to Velour!',{body:'You\\'re now subscribed to notifications. Stay updated with exclusive content!',icon:'/icon.svg'});},1000);}else{toast.error('Notification permission denied. You can enable it later in your browser settings.');setShowBanner(false);}}catch(error){console.error('Error requesting notification permission:',error);toast.error('Failed to enable notifications. Please try again.');}finally{setIsRequesting(false);}};const handleDismiss=()=>{setShowBanner(false);};if(!showBanner)return null;return/*#__PURE__*/_jsxs(NotificationBanner,{children:[/*#__PURE__*/_jsxs(BannerHeader,{children:[/*#__PURE__*/_jsxs(BannerTitle,{children:[/*#__PURE__*/_jsx(Bell,{size:18}),\"Enable Notifications\"]}),/*#__PURE__*/_jsx(CloseButton,{onClick:handleDismiss,children:/*#__PURE__*/_jsx(X,{size:16})})]}),/*#__PURE__*/_jsx(BannerText,{children:\"Get notified about new content, messages, and exclusive updates from your favorite creators.\"}),/*#__PURE__*/_jsxs(ButtonGroup,{children:[/*#__PURE__*/_jsx(BannerButton,{className:\"secondary\",onClick:handleDismiss,children:\"Maybe Later\"}),/*#__PURE__*/_jsx(BannerButton,{className:\"primary\",onClick:handleEnableNotifications,disabled:isRequesting,children:isRequesting?'Enabling...':'Enable'})]})]});};export default NotificationPrompt;","map":{"version":3,"names":["React","useState","useEffect","styled","Bell","X","Check","requestNotificationPermission","showNotification","toast","jsx","_jsx","jsxs","_jsxs","NotificationBanner","div","_templateObject","_taggedTemplateLiteral","BannerHeader","_templateObject2","BannerTitle","h3","_templateObject3","CloseButton","button","_templateObject4","BannerText","p","_templateObject5","ButtonGroup","_templateObject6","BannerButton","_templateObject7","NotificationPrompt","showBanner","setShowBanner","isRequesting","setIsRequesting","window","Notification","permission","timer","setTimeout","clearTimeout","handleEnableNotifications","granted","success","body","icon","error","console","handleDismiss","children","size","onClick","className","disabled"],"sources":["/Users/matty/VideoChat/VideoChat/client/src/components/NotificationPrompt.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport styled from 'styled-components';\nimport { Bell, X, Check } from 'lucide-react';\nimport { requestNotificationPermission, showNotification } from '../utils/pwa';\nimport toast from 'react-hot-toast';\n\nconst NotificationBanner = styled.div`\n  position: fixed;\n  top: 20px;\n  right: 20px;\n  background: linear-gradient(135deg, #ff69b4 0%, #7a288a 100%);\n  color: white;\n  padding: 16px 20px;\n  border-radius: 12px;\n  box-shadow: 0 10px 30px rgba(255, 105, 180, 0.3);\n  z-index: 1000;\n  max-width: 320px;\n  animation: slideIn 0.3s ease-out;\n\n  @keyframes slideIn {\n    from {\n      transform: translateX(100%);\n      opacity: 0;\n    }\n    to {\n      transform: translateX(0);\n      opacity: 1;\n    }\n  }\n\n  @media (max-width: 768px) {\n    top: 10px;\n    right: 10px;\n    left: 10px;\n    max-width: none;\n  }\n`;\n\nconst BannerHeader = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  margin-bottom: 12px;\n`;\n\nconst BannerTitle = styled.h3`\n  margin: 0;\n  font-size: 1.1rem;\n  font-weight: 600;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n`;\n\nconst CloseButton = styled.button`\n  background: none;\n  border: none;\n  color: white;\n  cursor: pointer;\n  padding: 4px;\n  border-radius: 4px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n\n  &:hover {\n    background: rgba(255, 255, 255, 0.1);\n  }\n`;\n\nconst BannerText = styled.p`\n  margin: 0 0 16px 0;\n  font-size: 0.9rem;\n  line-height: 1.4;\n  opacity: 0.9;\n`;\n\nconst ButtonGroup = styled.div`\n  display: flex;\n  gap: 8px;\n`;\n\nconst BannerButton = styled.button`\n  flex: 1;\n  padding: 8px 16px;\n  border: none;\n  border-radius: 8px;\n  font-size: 0.9rem;\n  font-weight: 500;\n  cursor: pointer;\n  transition: all 0.2s ease;\n\n  &.primary {\n    background: white;\n    color: #ff69b4;\n\n    &:hover {\n      background: rgba(255, 255, 255, 0.9);\n    }\n  }\n\n  &.secondary {\n    background: rgba(255, 255, 255, 0.1);\n    color: white;\n    border: 1px solid rgba(255, 255, 255, 0.2);\n\n    &:hover {\n      background: rgba(255, 255, 255, 0.2);\n    }\n  }\n`;\n\nconst NotificationPrompt = () => {\n  const [showBanner, setShowBanner] = useState(false);\n  const [isRequesting, setIsRequesting] = useState(false);\n\n  useEffect(() => {\n    // Check if notifications are supported and permission is not granted\n    if ('Notification' in window && Notification.permission === 'default') {\n      // Show banner after a short delay\n      const timer = setTimeout(() => {\n        setShowBanner(true);\n      }, 3000);\n      return () => clearTimeout(timer);\n    }\n  }, []);\n\n  const handleEnableNotifications = async () => {\n    setIsRequesting(true);\n    try {\n      const granted = await requestNotificationPermission();\n      if (granted) {\n        toast.success('Notifications enabled! You\\'ll receive updates about new content.');\n        setShowBanner(false);\n        \n        // Show a test notification\n        setTimeout(() => {\n          showNotification('Welcome to Velour!', {\n            body: 'You\\'re now subscribed to notifications. Stay updated with exclusive content!',\n            icon: '/icon.svg'\n          });\n        }, 1000);\n      } else {\n        toast.error('Notification permission denied. You can enable it later in your browser settings.');\n        setShowBanner(false);\n      }\n    } catch (error) {\n      console.error('Error requesting notification permission:', error);\n      toast.error('Failed to enable notifications. Please try again.');\n    } finally {\n      setIsRequesting(false);\n    }\n  };\n\n  const handleDismiss = () => {\n    setShowBanner(false);\n  };\n\n  if (!showBanner) return null;\n\n  return (\n    <NotificationBanner>\n      <BannerHeader>\n        <BannerTitle>\n          <Bell size={18} />\n          Enable Notifications\n        </BannerTitle>\n        <CloseButton onClick={handleDismiss}>\n          <X size={16} />\n        </CloseButton>\n      </BannerHeader>\n      \n      <BannerText>\n        Get notified about new content, messages, and exclusive updates from your favorite creators.\n      </BannerText>\n      \n      <ButtonGroup>\n        <BannerButton \n          className=\"secondary\" \n          onClick={handleDismiss}\n        >\n          Maybe Later\n        </BannerButton>\n        <BannerButton \n          className=\"primary\" \n          onClick={handleEnableNotifications}\n          disabled={isRequesting}\n        >\n          {isRequesting ? 'Enabling...' : 'Enable'}\n        </BannerButton>\n      </ButtonGroup>\n    </NotificationBanner>\n  );\n};\n\nexport default NotificationPrompt;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}